#include "common.h"
#include "../window/window.h"
#include "credits.h"

Credit D_credits_801E8BA0[] = {
    { 50, 240.0f, "POKεMON SNAP Staff", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "JACK and BEANS", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Director", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Yoichi Yamamoto", 0 },
    { 50, 320.0f, "Koji Inokuchi", 0 },
    { 50, 320.0f, "Akira Takeshima", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Designer", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Shigezo Kawase", 0 },
    { 50, 320.0f, "Takeyuki Machida", 0 },
    { 50, 320.0f, "Masanobu Yamamoto", 0 },
    { 50, 320.0f, "Shizu Higashiyama", 0 },
    { 0, 0, NULL, 0 },
};

Credit D_credits_801E8D00[] = {
    { 50, 320.0f, "Sound Designer", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Ikuko Mimori", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Programmer", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Yoshiaki Shinohara", 0 },
    { 50, 320.0f, "Kazuki Sekimori", 0 },
    { 50, 320.0f, "Jinji Horagai", 0 },
    { 50, 320.0f, "Tomoyuki Sumi", 0 },
    { 50, 320.0f, "Hirotaka Kato", 0 },
    { 50, 320.0f, "Hideaki Kiko", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Technical Support", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Makoto Kanai", 0 },
    { 0, 0, NULL, 0 },
};

Credit D_credits_801E8E30[] = {
    { 50, 320.0f, "Supervisor", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Kensuke Tanabe", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "US Coordination", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Hiro Nakamura", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "N64 Modeling Center Tokyo", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Super Duper Special Chief Designer", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Benimaru \"ASHURA\" Ito", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Takeshi Iizuka", 0 },
    { 50, 320.0f, "Hiroshi Ishikawa", 0 },
    { 50, 320.0f, "Takemi Ichikawa", 0 },
    { 50, 320.0f, "Atsuko Ujiie", 0 },
    { 50, 320.0f, "Ryuta Kusumi", 0 },
    { 50, 320.0f, "Izuru Kumasaka", 0 },
    { 50, 320.0f, "Toru Kurashige", 0 },
    { 50, 320.0f, "Satomi Kokubo", 0 },
    { 50, 320.0f, "Hitoshi Kobayashi", 0 },
    { 50, 320.0f, "Mitsuteru Sato", 0 },
    { 50, 320.0f, "Yuichi Sawayama", 0 },
    { 50, 320.0f, "Hikaru Jinguji", 0 },
    { 50, 320.0f, "Nachi Sugiyama", 0 },
    { 50, 320.0f, "Jyungo Suzuki", 0 },
    { 50, 320.0f, "Yoshiyuki Tagawa", 0 },
    { 50, 320.0f, "Kazuo Yazawa", 0 },
    { 50, 320.0f, "Akira Yamazaki", 0 },
    { 50, 320.0f, "Shinichi Yoshikawa", 0 },
    { 0, 0, NULL, 0 },
};

Credit D_credits_801E9080[] = {
    { 50, 320.0f, "Voice Actor", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Stan Hart", 0 },
    { 50, 320.0f, "Jimmy Zoppi", 0 },
    { 50, 320.0f, "Ikue Otani", 0 },
    { 50, 320.0f, "and", 0 },
    { 50, 320.0f, "Others...", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Special Thanks", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Hiroyuki Jinnai", 0 },
    { 50, 320.0f, "Gakuji Nomoto", 0 },
    { 50, 320.0f, "Jyun Yamazaki", 0 },
    { 50, 320.0f, "Chiharu Ito", 0 },
    { 50, 320.0f, "Masayoshi Tanimura", 0 },
    { 50, 320.0f, "Satoshi Ishida", 0 },
    { 50, 320.0f, "Tetsuya Notoya", 0 },
    { 50, 320.0f, "Chieko Obikane", 0 },
    { 50, 320.0f, "Hisatoshi Takeuchi", 0 },
    { 50, 320.0f, "Keita Oriuchi", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "N64 Modeling Center Kyoto", 0 },
    { 50, 320.0f, "System Development #2 (HAL)", 0 },
    { 50, 320.0f, "HAL Debug Team", 0 },
    { 50, 320.0f, "Super Mario Club", 0 },
    { 50, 320.0f, "Creatures inc.", 0 },
    { 50, 320.0f, "GAME FREAK inc.", 0 },
    { 0, 0, NULL, 0 },
};

Credit D_credits_801E9260[] = {
    { 50, 320.0f, "Character Supervisor", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Yoichi Kotabe", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Pokεmon Created by", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Satoshi Tajiri", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Pokεmon Producer", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Tsunekaz Ishihara", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Producer", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Satoru Iwata", 0 },
    { 50, 320.0f, "Kenji Miki", 0 },
    { 50, 320.0f, "Shigeru Miyamoto", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Executive Producer", 0 },
    { 50, 320.0f, "", 0 },
    { 50, 320.0f, "Hiroshi Yamauchi", 0 },
    { 0, 0, NULL, 0 },
};

Credit* D_credits_801E9400[] = {
    D_credits_801E8BA0,
    D_credits_801E8D00,
    D_credits_801E8E30,
    D_credits_801E9080,
    D_credits_801E9260,
};

s32 D_credits_801E9414[] = { 0, 0, 0 };

void func_credits_801DDD80(void) {
    s32* var_v0;
    u32 i;

    D_credits_801ECDA8 = 0;
    var_v0 = D_credits_801ECDB0;
    for (i = 0; i < 152; i++) {
        *var_v0++ = 999;
    }

    for (i = 0; i < 152; i++) {
        if (func_800BF710_5C5B0(i) != NULL) {
            D_credits_801ECDB0[D_credits_801ECDA8] = i;
            D_credits_801ECDA8++;
        }
    }
}

void func_credits_801DDE24(GObj* gobj) {
    SObj* sobj = gobj->data.sobj;
    f32 scale;
    f32 temp_f22;

    auPlaySoundWithParams(0x47, 0x7FFF, 0x40, 1.0, 0xF);
    temp_f22 = 0.1;

    scale = 4.0f;
    while (sobj->sprite.scalex > 1.0f) {
        scale -= temp_f22;
        ohWait(1);
        func_credits_801DEB74(sobj, scale);
        func_credits_801DEA30(sobj, scale);
    }
    func_credits_801DEA30(sobj, 1.0);
    func_credits_801DEB74(sobj, 1.0);
    ohWait(1);
    omEndProcess(NULL);

    while (true) {
        ohWait(1);
    }
}

void func_credits_801DDF1C(GObj* arg0) {
    omCreateProcess(arg0, func_credits_801DDE24, 0, 1);
}

void func_credits_801DDF48(GObj* arg0) {
    SObj* sobj;
    SObj* it;
    s16 var_s0;

    sobj = arg0->data.sobj;
    auPlaySoundWithParams(0x50, 0x7FFF, 0x40, 1.0f, 0xF);

    var_s0 = 10;
    while (sobj->sprite.y < 300) {
        for (it = sobj; it != NULL; it = it->next) {
            it->sprite.y += var_s0;
        }

        var_s0++;
        ohWait(1);
    }

    for (it = sobj; it != NULL; it = it->next) {
        it->sprite.attr |= SP_HIDDEN;
    }
    omEndProcess(NULL);

    while (true) {
        ohWait(1);
    }
}

void func_credits_801DE034(GObj* arg0) {
    omCreateProcess(arg0, func_credits_801DDF48, 0, 1);
}

void func_credits_801DE060(void) {
    Credit* credit;
    Credit* temp_v0;
    u32 limit;
    f32 val;
    s32 j;
    s32 i;

    D_credits_801ECDA4 = 1;

    for (i = 0; i < ARRAY_COUNT(D_credits_801E9400); i++) {
        func_credits_801DDF1C(D_credits_801ECC80[i]);
        credit = D_credits_801E9400[i];

        while (true) {
            func_credits_801DDB60();
            temp_v0 = func_credits_801DDC0C();

            if (temp_v0 == NULL) {

            } else if (credit->unk_0 != 0) {
                temp_v0->unk_0 = (SCREEN_WIDTH / 2) - (func_8036D4F0_840CA0(credit->unk_8) / 2);
                temp_v0->unk_4 += 252.0f;
                func_8036A8E4_83E094(temp_v0->unk_C);
                func_8036C898_840048(temp_v0->unk_C, credit->unk_8);
                credit++;
            } else {
                break;
            }
            ohWait(1);
        }

        val = 0.5f;

        if (i == ARRAY_COUNT(D_credits_801E9400) - 1) {
            limit = 234.0f / val;
        } else {
            if (1) {
                // required to match
            }
            limit = 198.0f / val;
        }

        for (j = 0; j != limit; j++) {
            ohWait(1);
            func_credits_801DDB60();
            temp_v0 = func_credits_801DDC0C();
            if (temp_v0 != NULL) {
                func_8036A8E4_83E094(temp_v0->unk_C);
                temp_v0->unk_4 += 252.0f;
            }
        }
        func_credits_801DE034(D_credits_801ECC80[i]);
    }
    func_credits_801DD980();
    ohWait(180);

    while (true) {
        if (gContInputPressedButtons & (A_BUTTON | START_BUTTON)) {
            func_credits_801DDA60();
            break;
        }
        ohWait(1);
    }
}

void func_credits_801DE35C(void) {
    Credit* credit;
    Credit* temp_v0;
    u32 limit;
    u32 i;
    s32 j;
    f32 val = 0.44f;

    D_credits_801ED010 = 20;
    ohWait(240);
    D_credits_801ECDA4 = 1;

    for (i = 0; i < ARRAY_COUNT(D_credits_801E9400); i++) {
        credit = D_credits_801E9400[i];

        while (true) {
            func_credits_801DDB60();
            temp_v0 = func_credits_801DDC0C();

            if (0) {
                // required to match
            }

            if (temp_v0 == NULL) {

            } else if (credit->unk_0 != 0) {
                temp_v0->unk_0 = (SCREEN_WIDTH / 2) - (func_8036D4F0_840CA0(credit->unk_8) / 2);
                temp_v0->unk_4 += 252.0f;
                func_8036A8E4_83E094(temp_v0->unk_C);
                func_8036C898_840048(temp_v0->unk_C, credit->unk_8);
                credit++;
            } else {
                break;
            }
            ohWait(1);
        }

        if (i == 4 && D_credits_801ECDA4 == 1) {
            D_credits_801ECDA4 = 2;
        }

        switch (i) {
            case 0:
                limit = 54.0f / val;
                break;
            case 4:
                limit = 234.0f / val;
                break;
            default:
                limit = 90.0f / val;
                break;
        }

        for (j = 0; j != limit; j++) {
            ohWait(1);
            func_credits_801DDB60();
            temp_v0 = func_credits_801DDC0C();
            if (temp_v0 != NULL) {
                func_8036A8E4_83E094(temp_v0->unk_C);
                temp_v0->unk_4 += 252.0f;
            }
        }
    }

    func_credits_801DD980();
    ohWait(180);
    func_credits_801DD744();
    ohWait(180);

    while (true) {
        if (gContInputPressedButtons & (A_BUTTON | START_BUTTON)) {
            func_credits_801DDA60();
            break;
        }
        ohWait(1);
    }
}

void func_credits_801DE734(GObj* arg0) {
    switch (D_credits_801ECDA0) {
        case SCENE_CREDITS_18:
            func_credits_801DE060();
            return;
        case SCENE_CREDITS_17:
        case SCENE_CREDITS_20:
            func_credits_801DCF94();
            func_credits_801DE060();
            return;
        case SCENE_CREDITS_19:
            func_credits_801DE35C();
            return;
    }
}

void func_credits_801DE7B4(s32 arg0) {
    auSetBGMVolume(0, 0x7F00);
    switch (arg0) {
        case 18:
            auPlaySong(0, 0xB);
            return;
        case 19:
            auPlaySong(0, 0x24);
            return;
        case 17:
        case 20:
            auPlaySong(0, 0xB);
            return;
    }
}

void func_credits_801DE844(GObj* arg0) {
    func_credits_801DE7B4(D_credits_801ECDA0);
    func_credits_801DDD80();
    func_credits_801DDAE8(D_credits_801ECDA3);
    func_credits_801DDC70();
    func_credits_801DE734(arg0);
    func_800067DC();
    ohWait(1);
}

void func_credits_801DE8A0(SObj* sobj, s32 arg1) {
    void* temp_v0;

    temp_v0 = func_800BF710_5C5B0(arg1);
    if (temp_v0 != NULL) {
        func_80374714_847EC4(temp_v0, &sobj->sprite);
    }
}

s32 func_credits_801DE8D8(void) {
    s32 temp_t1;
    s32* var_a0;
    s32* var_v1;
    u8 idx;
    s32 orig;
    s32 i;

    idx = randTRange(D_credits_801ECDA8);

    temp_t1 = D_credits_801ECDA8;

    orig = D_credits_801ECDB0[idx];
    D_credits_801ECDB0[idx] = 999;
    D_credits_801ECDA8 = 0;

    var_v1 = D_credits_801ECDB0;
    var_a0 = D_credits_801ECDB0;

    for (i = 0; i != temp_t1; i++) {
        if (*var_a0 != 999) {
            *var_v1 = *var_a0;
            var_v1++;
            D_credits_801ECDA8++;
        }
        var_a0++;
    }

    if (D_credits_801ECDA8 == 0) {
        D_credits_801ECDA4 = 2;
    }
    return orig;
}

void func_credits_801DEA30(SObj* sobj, f32 arg1) {
    SObj* it;

    sobj->sprite.x = (SCREEN_WIDTH / 2) - (70.0f * arg1);
    sobj->sprite.y = (SCREEN_HEIGHT / 2) - (52.0f * arg1);

    if (1) {
        // required to match
    }
    sobj->sprite.red = sobj->sprite.green = sobj->sprite.blue = (s16) (255.0f - ((arg1 - 1.0f) * 53.0f));

    it = sobj->next;
    it->sprite.x = sobj->sprite.x - (s16) (3.0f * arg1);
    it->sprite.y = sobj->sprite.y - (s16) (3.0f * arg1);

    it = it->next;
    it->sprite.x = sobj->sprite.x + (s16) (140.0f * arg1);
    it->sprite.y = sobj->sprite.y - (s16) (3.0f * arg1);

    it = it->next;
    it->sprite.x = (SCREEN_WIDTH / 2) - (s16) (70.0f * arg1);
    it->sprite.y = sobj->sprite.y - (s16) (3.0f * arg1);

    it = it->next;
    it->sprite.x = (SCREEN_WIDTH / 2) - (s16) (70.0f * arg1);
    it->sprite.y = sobj->sprite.y + (s16) (105.0f * arg1);
}

void func_credits_801DEB74(SObj* sobj, f32 scale) {
    while (sobj != NULL) {
        sobj->sprite.scalex = scale;
        sobj->sprite.scaley = scale;
        sobj = sobj->next;
    }
}
